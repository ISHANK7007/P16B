Input: Task Context → Memory Resolution → Template Selection → Context Enrichment → Prompt Generation